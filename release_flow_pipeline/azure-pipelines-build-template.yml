jobs:
    - job:
      displayName: "Build Golang app"
      steps:
          - task: Docker@2
            displayName: Build image
            inputs:
                repository: $
                command: build
                Dockerfile: $(System.DefaultWorkingDirectory)/Dockerfile
                tags: $
          - script: |
                docker images
                docker save $(parameters.imageName):$(parameters.tags) > go.tar
          - task: PublishBuildArtifacts@1
            displayName: Publish package ready for dev
            inputs:
                PathtoPublish: "$(System.DefaultWorkingDirectory)/go.tar"
                artifactName: "image"
          - script: |
                docker images
